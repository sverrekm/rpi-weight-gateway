<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RPI Weight Gateway</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header>
    <h1>RPI Weight Gateway</h1>
    <div id="health">
      <span id="uptime">Uptime: -</span>
      <span id="wifi">WiFi: -</span>
      <span id="mqtt">MQTT: -</span>
      <span id="version">v-</span>
    </div>
  </header>

  <main>
    <section class="panel">
      <h2>Live Reading</h2>
      <div class="reading">
        <div class="value"><span id="grams">--.-</span> g</div>
        <div class="stable" id="stable">unstable</div>
      </div>
      <div class="actions">
        <button id="btnTare">Tare</button>
        <button id="btnZero">Zero</button>
      </div>
      <div class="calibrate">
        <input type="number" id="knownGrams" placeholder="Known weight (g)" step="0.1" min="0" />
        <button id="btnCalibrate">Calibrate</button>
        <span id="calibStatus"></span>
      </div>
    </section>

    <section class="panel">
      <h2>Configuration</h2>
      <form id="cfgForm">
        <div class="grid">
          <label>MQTT Host <input name="mqtt_host" /></label>
          <label>MQTT Port <input name="mqtt_port" type="number" min="1" max="65535" /></label>
          <label>MQTT User <input name="mqtt_user" /></label>
          <label>MQTT Pass <input name="mqtt_pass" type="password" /></label>
          <label>Weight Topic <input name="weight_topic" /></label>
          <label>Status Topic <input name="status_topic" /></label>
          <label>Cmd Topic <input name="cmd_topic" /></label>
          <label>GPIO DOUT <input name="gpio_dout" type="number" /></label>
          <label>GPIO SCK <input name="gpio_sck" type="number" /></label>
          <label>Sample rate (Hz) <input name="sample_rate" type="number" min="1" max="80" /></label>
          <label>Median window <input name="median_window" type="number" min="1" /></label>
          <label>Scale <input name="scale" type="number" step="0.0001" /></label>
          <label>Offset <input name="offset" type="number" step="0.0001" /></label>
          <label>Demo mode <input name="demo_mode" type="checkbox" /></label>
        </div>
        <div class="actions">
          <button type="submit">Save</button>
          <span id="cfgStatus"></span>
        </div>
      </form>
      <p class="hint">WiFi setup is shown in Health (SSID/IP). Provisioning is managed separately on this image.</p>
    </section>
  </main>

  <script src="/app.js"></script>
</body>
</html>
